<!--
Copyright 2014 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="ct-results-comparison-zoomer.html">

<script>
(function () {

module("ct-results-comparison-zoomer");

asyncTest("no-position", 2, function() {
  var zoomer = document.createElement('ct-results-comparison-zoomer');
  // FIXME: This should set zoomer.position instead, but there's no way
  // to get between the microtask and requestAnimationFrame to verify the
  // behavior.
  zoomer.positionChanged();
  ok(zoomer._drawScheduled);

  requestAnimationFrame(function() {
    ok(!zoomer._drawScheduled);
    start();
  });
});

test("draw", 3, function() {
  // Hard to verify correct behavior here, but at least make sure the
  // code executes without throwing errors.

  var zoomer = document.createElement('ct-results-comparison-zoomer');

  try {
    zoomer._drawAll();
    ok(true);
  } catch(e) {
    ok(false);
  }

  // FIXME: Use a proper model class instead of a dumb object.
  zoomer.position = {x: 0, y: 0};
  try {
    zoomer._drawAll();
    ok(true);
  } catch(e) {
    ok(false);
  }

  try {
    zoomer._draw(zoomer.$.diffZoomer);
    ok(true);
  } catch(e) {
    ok(false);
  }
});

})()
</script>
