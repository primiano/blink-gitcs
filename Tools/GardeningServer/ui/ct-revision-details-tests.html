<!--
Copyright 2014 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="ct-revision-details.html">
<link rel="import" href="../model/ct-builder-revisions-mock.html">

<script>
(function() {

module("ct-revision-details");

asyncTest("empty", 2, function() {
  var revisionDetails = document.createElement('ct-revision-details');
  requestAnimationFrame(function() {
    equal(revisionDetails.shadowRoot.querySelector('#fullyProcessedRevision'), null);
    equal(revisionDetails.shadowRoot.querySelector('#trunkRevision'), null);
    start();
  });
});

asyncTest("basic", 2, function() {
  var revisionDetails = document.createElement('ct-revision-details');

  var builderRevisions = CTBuilderRevisionsMock();
  var commitLog = CTCommitLogMock();
  commitLog._findFirstAndLastRevisions('blink');

  revisionDetails.builderLatestRevisions = builderRevisions;
  revisionDetails.tree = 'blink';
  revisionDetails.revisionLog = commitLog;

  requestAnimationFrame(function() {
      equal(revisionDetails.shadowRoot.querySelector('#fullyProcessedRevision').innerText, '158543');
      equal(revisionDetails.shadowRoot.querySelector('#trunkRevision').innerText, '158545');
      start();
  });
});

})()
</script>