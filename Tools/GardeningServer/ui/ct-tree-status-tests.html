<!--
Copyright 2014 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="ct-tree-status.html">

<script>
(function () {

module("ct-tree-status");

asyncTest('basic', 5, function() {
  var openTree = document.createElement("ct-tree-status");
  var openTreeStatus = new TreeStatus('open-tree-project');
  openTreeStatus.status = 'open';
  openTree.status = openTreeStatus;

  var throttledTree = document.createElement("ct-tree-status");
  var throttledTreeStatus = new TreeStatus('throttled-tree-project');
  throttledTreeStatus.status = 'throttled';
  throttledTreeStatus.message = 'Tree is throttled just for fun';
  throttledTree.status = throttledTreeStatus;

  var closedTree = document.createElement("ct-tree-status");
  var closedTreeStatus = new TreeStatus('closed-tree-project');
  closedTreeStatus.status = 'closed';
  closedTreeStatus.message = 'Tree is closed';
  closedTree.status = closedTreeStatus;

  var simulator = new NetworkSimulator(ok, start);
  simulator.runTest(function() {
    requestAnimationFrame(function() {
      ok(!openTree.shadowRoot.textContent.has("open-tree-project"));
      ok(throttledTree.shadowRoot.textContent.has("throttled-tree-project"));
      ok(closedTree.shadowRoot.textContent.has("closed-tree-project"));
      equal(closedTree.shadowRoot.querySelector('a').href, closedTreeStatus.url);
      start();
    });
  });
});

})();
</script>
