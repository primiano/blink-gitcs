<!--
Copyright 2014 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<!--
Styled link to a builder. If an array is passed to |steps|, the
link will show the builder name and architecture followed by the steps instead.
-->
<polymer-element name="ct-builder" attributes="builder masterUrl steps">
  <template>
    <style>
      a {
        border: 1px solid gray;
        color: black;
        display: inline-block;
        font-size: 11px;
        margin-bottom: 2px;
        padding: 1px;
        text-decoration: none;
      }

      span {
        padding: 0 2px;
      }

      .builder {
        background-color: #555;
        color: white;
      }
    </style>
    <a href="{{ builder|builderURL }}">
      <span class="builder">{{ builder }}</span>
      <template if="{{ stepList }}">
        <span class="details">{{ stepList }}</span>
      </template>
    </a>
  </template>
  <script>
    Polymer({
      builder: '',
      masterUrl: '',
      steps: [],

      stepsChanged: function() {
        this.stepList = this.steps.join(', ');
      },

      builderURL: function() {
        // FIXME: This should move a model class.
        // FIXME: Don't link to the waterfall, link to the first failing build.
        return this.masterUrl + '/waterfall?' + Object.toQueryString({
          builder: this.builder,
        });
      },
    });
  </script>
</polymer-element>
