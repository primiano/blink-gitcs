<!--
Copyright 2014 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="ct-builder.html">

<link rel="import" href="../model/ct-builder.html">

<script>
(function () {

module("ct-builder");

asyncTest("basic", 4, function() {
  var builder = document.createElement('ct-builder');

  var masterUrl = 'http://url/';
  var builderName = 'WebKit Linux (dbg)';
  var firstFailingBuild = '1234';
  builder.builder = new CTBuilder(masterUrl,
    builderName, firstFailingBuild);

  builder.async(function() {
    var html = builder.shadowRoot.innerHTML;

    var a = builder.shadowRoot.querySelector('a');
    ok(a);
    equal(a.href.indexOf(masterUrl), 0);
    notEqual(a.href.indexOf(encodeURIComponent(builderName)), -1);
    notEqual(a.href.indexOf(firstFailingBuild), -1);

    start();
  });
});

})()
</script>
