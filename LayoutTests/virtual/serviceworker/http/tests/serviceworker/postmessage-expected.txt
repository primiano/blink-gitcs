Tests postMessage to and from a ServiceWorker

On success, you will see a series of "PASS" messages, followed by "TEST COMPLETE".


messageChannel = new MessageChannel()
messageChannel.port1.onmessage = onMessageHandler

navigator.serviceWorker.register('postmessage-worker.js')
serviceWorker.postMessage({port: messageChannel.port2}, [messageChannel.port2])
serviceWorker.postMessage({value: 1})
serviceWorker.postMessage({value: 2})
serviceWorker.postMessage({done: true})

onMessageHandler: "Acking value: 1"

onMessageHandler: "Acking value: 2"

onMessageHandler: "quit"
PASS successfullyParsed is true

TEST COMPLETE

