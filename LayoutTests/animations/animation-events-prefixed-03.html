<!DOCTYPE html>
<html>
<head>
  <title>Tests that prefixed animation events are correctly fired when using html event listeners.</title>
  <style>
    #box {
      position: relative;
      left: 100px;
      top: 10px;
      height: 100px;
      width: 100px;
      animation-duration: 0.3s;
      animation-name: anim;
      background-color: #999;
      animation-iteration-count: 3;
    }
    @keyframes anim {
        from { left: 200px; }
        to   { left: 300px; }
    }
  </style>
  <script>
    if (window.testRunner) {
        testRunner.dumpAsText();
        testRunner.waitUntilDone();
    }

    function fail() {
      document.getElementById('result').innerHTML = 'FAIL: Got ' + iterationEventReceived + ' animationCount events.';
    }

    var iterationEventReceived = 0;
    var startEventReceived = false;

    function recordAnimationStart() {
      startEventReceived = true;
    }

    function recordAnimationIteration() {
      ++iterationEventReceived;
    }

    function recordAnimationEnd() {
        if (iterationEventReceived > 0 && iterationEventReceived <= 2 && startEventReceived)
            document.getElementById('result').innerHTML = 'PASS: All events have been received as expected.';
        else
            fail();
        if (window.testRunner)
            testRunner.notifyDone();
    }
  </script>
</head>
<body>
Tests that prefixed animation events are correctly fired when using html event listeners.
<pre id="result">FAIL: No animation events received</pre>
<div id="box" onwebkitanimationstart="recordAnimationStart();" onwebkitanimationend="recordAnimationEnd();" onwebkitanimationiteration="recordAnimationIteration();"></div>
</body>
</html>
