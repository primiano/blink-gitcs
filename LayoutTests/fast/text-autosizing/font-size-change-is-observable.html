<!DOCTYPE HTML>
<html>
<head>
<style>
#autosize {
  font-size: 10px;
}
</style>
<script>
  if (window.internals) {
    window.internals.settings.setTextAutosizingEnabled(true);
    window.internals.settings.setTextAutosizingWindowSizeOverride(320, 480);
  } else if (window.console && console.warn) {
    console.warn("This test depends on the Text Autosizing setting being true, so run it in DumpRenderTree, or manually enable Text Autosizing");
  }

  function test() {
    var autosizeContainer = document.getElementById('autosize');
    var forceLayout = autosizeContainer.offsetWidth;
    var computedFontSize = parseInt(window.getComputedStyle(autosizeContainer).fontSize);
    if (computedFontSize > 10)
      document.write('PASS');
    else
      document.write('FAIL. Expected a font size above 10, got ' + computedFontSize);
    if (window.testRunner)
      testRunner.dumpAsText();
  }
</script>
</head>
<body onload="test()">
  <div id="autosize">
    This test passes if this text is autosized, the font size change is observable from javascript, and FAIL is not printed. I'm just adding lines so this text is long enough to autosize. I'm just adding lines so this text is long enough to autosize. I'm just adding lines so this text is long enough to autosize. I'm just adding lines so this text is long enough to autosize. I'm just adding lines so this text is long enough to autosize. I'm just adding lines so this text is long enough to autosize. 
  </div>
</body>
</html>
