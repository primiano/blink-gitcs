<!DOCTYPE html>
<html>
<head>
<title>Check shadow rendering rect and image with source-in.</title>
<style type="text/css">
  canvas { border: 1px solid #999; }
</style>
</head>
<body>
<div>Test Rect</div>
<canvas id="canvas-for-color" width="200" height="200"></canvas>
<div>Test Image</div>
<canvas id="canvas-for-image" width="200" height="200"></canvas>
<script>
  var canvas_color = document.getElementById("canvas-for-color");
  var ctx_color = canvas_color.getContext("2d");
  drawReference(ctx_color);

  var canvas_image = document.getElementById("canvas-for-image");
  var ctx_image = canvas_image.getContext("2d");
  drawReference(ctx_image);

  function drawReference(ctx) {
    ctx.beginPath();
    ctx.rect(100, 100, 150, 50);
    ctx.clip();
    ctx.shadowColor = 'teal';
    ctx.shadowBlur = 10;
    ctx.shadowOffsetX = -310;
    ctx.fillStyle = 'teal';
    ctx.fillRect(300, 0, 200, 200);
  }
</script>
</body>
</html>