<!DOCTYPE html>
<script src="../../../resources/js-test.js"></script>
<script>
description('Test that a script end tags invokes MutationObserver callbacks');

var mutationsDelivered = false;
function callback(mutations) {
    mutationsDelivered = true;
}

var observer = new MutationObserver(callback);
var div = document.createElement('div');
observer.observe(div, {attributes: true});
div.setAttribute('foo', 'bar');
shouldBeFalse('mutationsDelivered');
document.write('<script><\/script>'); // performs a microtask checkpoint
shouldBeTrue('mutationsDelivered');
</script>
