<!DOCTYPE html>
<head>
<script type="text/javascript">
if (window.testRunner) {
    testRunner.waitUntilDone();
    testRunner.dumpAsText()
}

function log(msg)
{
    document.getElementById('console').appendChild(document.createTextNode(msg + "\n"));
}
</script>
</head>
<body>
Checks the behaviour of setInterval(..., 0);  It should be called repeatedly in a 100ms interval.<br/>
<br/><br/>
<pre id="console"></pre>
<script>
var count = 0;
// In pratice we'd expect increment() to be called around 24 times, but GCs can occur at inconveniant times
// so the expectation has been set to be much lower.
var mimimumExpectedCount = 5;

function increment() {
    count = count + 1;
}

function checkCount() {
    if (count >= mimimumExpectedCount)
        log("PASS: All tests passed.");
    else
        log("FAIL: All tests did not pass.");

    if (window.testRunner)
        testRunner.notifyDone();
}

setTimeout(checkCount, 100);
setInterval(increment, 0);
</script>
</body>
</html>
