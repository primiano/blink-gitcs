<!DOCTYPE html>
<script src="../../js/resources/js-test-pre.js"></script>
<body>
<script>
description('Tests that an element is not upgraded after being destroyed');

// Create an upgrade candidate. Don't wrap it.
var div = document.createElement('div');
div.innerHTML = '<span is="x-a"></span>';

// Delete the upgrade candidate.
div.innerHTML = '';

// Provide a definition that would have matched.
var proto = Object.create(HTMLSpanElement.prototype);
proto.createdCallback = function () {
    testFailed('unreachable');
};
document.register('x-a', {prototype: proto});

testPassed('Did not crash.');

successfullyParsed = true;
</script>
