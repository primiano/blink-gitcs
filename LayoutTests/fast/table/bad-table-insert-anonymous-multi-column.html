<!DOCTYPE html>
<script>
if (window.testRunner)
    testRunner.dumpAsText();

function crash() {
  document.execCommand("SelectAll", false);

  document.designMode = "on";
  document.getElementById("select").textContent = 'Lorem';

  document.execCommand('FormatBlock', false, '<blockquote>');
  var oSelection = window.getSelection();
  var oRange = oSelection.getRangeAt(0);
  var oInsertedElement = document.getElementsByTagName("wrapper")[1];
  oRange.insertNode(oInsertedElement)

  document.execCommand('InsertText', false, "Lorem ipsum");
  document.execCommand('Undo', false, false);
}
window.addEventListener("load", crash, false);
</script>
<style>
.columnCount{-webkit-column-count:1;}
.caption{display:table-caption;}
.columnSpanAll{-webkit-column-span:all;}
</style>
<body class="columnCount">
<div>
    <input></input>
    <div class="caption">
        <wrapper>
            <select id="select">This test has PASSED if it didn't CRASH.</select>
            <div class="caption"></div>
        </wrapper>
    </div>
</div>
<table class="columnSpanAll">
