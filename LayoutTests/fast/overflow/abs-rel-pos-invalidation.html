<!DOCTYPE html>
<script src="../repaint/resources/text-based-repaint.js"></script>
<script>
    function repaintTest()
    {
        var div1 = document.getElementById("div1");
        var div2 = document.getElementById("div2");
        div1.style.overflow = 'visible';
        div2.style.display = 'block';
        document.body.offsetTop;
        div1.style.overflow = 'hidden';
        div2.style.display = 'none';
    }
</script>
<style>
    #div1 {
        position: relative;
        width: 100px;
        height: 100px;
        overflow: hidden;
        background: #f00;
    }
    #div2 {
        position: absolute;
        left: 100px;
        top: 0;
        display: none;
        width: 300px;
        height: 300px;
        background: #00f;
    }
</style>
<body onload="runRepaintTest()">
    <div id="div1">
        <div id="div2"></div>
    </div>
    <p>crbug.com/377520: Invalidate the rect of an element that is being removed from the tree even when it is overflow-clipped at the time of invalidation.</p>
</body>

