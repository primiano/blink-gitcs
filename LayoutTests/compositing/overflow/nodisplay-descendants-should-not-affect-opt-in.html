<!DOCTYPE html>

<html>
<head>
  <style>
    .container {
      width: 200px;
      height: 200px;
      overflow: scroll;
      margin: 20px;
      border: 1px solid black;
    }

    .scrolled {
      width: 180px;
      height: 90px;
      margin: 10px;
      background-color: gray;
      position: relative;
    }

    .positioned {
      width: 120px;
      height: 240px;
      background-color: green;
      position: absolute;
    }

    #descendant {
      left: 90px;
      top: 20px;
      background-color: blue;
      z-index: -20;
    }
  </style>
  <script>
    var debugMode = false;

    if (window.testRunner)
      testRunner.dumpAsText();

    if (window.internals) {
      window.internals.settings.setAcceleratedCompositingForOverflowScrollEnabled(true);
      window.internals.settings.setCompositorDrivenAcceleratedScrollingEnabled(false);
    }

    function doTest()
    {
      var descendant = document.getElementById('descendant');
      descendant.style.visibility = '';
      descendant.style.display = 'none';

      if (window.internals)
        document.getElementById('layers').innerText = window.internals.layerTreeAsText(document);
    } // function doTest

    window.addEventListener('load', doTest, false);
  </script>
</head>

<body>
  <div class="container" id="container">
    <div class="scrolled" id="firstChild"></div>
    <div class="scrolled" id="secondChild"></div>
    <div class="positioned" id="descendant"></div>
  </div>
  <pre id="layers"></pre>
</body>
</html>
